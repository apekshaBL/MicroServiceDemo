spring.application.name=auth-service
server.port=8089

# --- Database Configuration ---
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/student_service_db
spring.datasource.username=postgres
spring.datasource.password=apeksha123
spring.datasource.driver-class-name=org.postgresql.Driver

# --- Liquibase Configuration ---
# Liquibase will create the tables in 'auth_schema'
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/master.xml
spring.liquibase.default-schema=public

# --- JPA / Hibernate Configuration ---
# 1. Set to 'none' so Hibernate doesn't interfere with Liquibase
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# 2. Tell Hibernate to look in the 'auth_schema' by default
spring.jpa.properties.hibernate.default_schema=public

# 3. FIX for "column isactive does not exist":
# Converts Java 'isActive' to SQL 'is_active' automatically
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy

# 4. Multi-Tenancy (KEEP COMMENTED OUT until your classes are uncommented in Java)
# spring.jpa.properties.hibernate.multiTenancy=SCHEMA

# --- Consul Discovery ---
spring.cloud.consul.discovery.health-check-critical-timeout=1m
spring.cloud.consul.discovery.instance-id=${spring.application.name}:${random.value}
spring.cloud.consul.discovery.prefer-ip-address=true
spring.cloud.consul.discovery.hostname=127.0.0.1