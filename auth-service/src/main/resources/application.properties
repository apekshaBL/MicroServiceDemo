spring.application.name=auth-service
server.port=8089

# --- Database Configuration ---
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/student_service_db
spring.datasource.username=postgres
spring.datasource.password=apeksha123
spring.datasource.driver-class-name=org.postgresql.Driver

# --- Liquibase Configuration ---
# We disable the default Spring Liquibase runner because multi-tenancy
# requires running migrations manually for each tenant schema.
spring.liquibase.enabled=false
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# --- JPA / Hibernate Multi-Tenancy ---
# 1. MUST be 'none' because Liquibase handles the schema now
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect


# Tell Hibernate to use the SCHEMA strategy
spring.jpa.properties.hibernate.multiTenancy=SCHEMA

# 3. Reference your common-lib classes here
#spring.jpa.properties.hibernate.multi_tenant_connection_provider=auth_service.common.config.MultiTenantConnectionProviderImpl
#spring.jpa.properties.hibernate.tenant_identifier_resolver=auth_service.common.config.TenantIdentifierResolver
spring.jpa.properties.hibernate.ddl-auto=update
# --- Consul Discovery ---
spring.cloud.consul.discovery.health-check-critical-timeout=1m
spring.cloud.consul.discovery.instance-id=${spring.application.name}:${random.value}

spring.cloud.consul.discovery.prefer-ip-address=true
spring.cloud.consul.discovery.hostname=127.0.0.1